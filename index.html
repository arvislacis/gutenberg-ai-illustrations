<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Project Gutenberg book AI illustrations</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <button id="dark-mode-toggle" title="Toggle dark mode">‚òÄÔ∏è</button>
    <button id="api-key-toggle" class="hidden" title="Change API key">üîë</button>

    <header class="hidden">
        <h1 class="book-title"></h1>
        <div class="book-subtitle"></div>
        <div class="book-author"></div>
    </header>

    <main class="book-content"></main>

    <footer class="hidden">
        <p>This edition is based on the <a href="https://www.gutenberg.org" class="book-url" target="_blank">Project Gutenberg</a> text.</p>
    </footer>

    <!-- Book selection popup -->
    <div id="book-select-overlay">
        <div id="book-select-popup">
            <h2>Choose a Book from Project Gutenberg</h2>
            <div class="search-container">
                <input type="text" id="book-search" placeholder="Search by title or author...">
                <button id="search-btn">Search</button>
            </div>
            <div id="book-list"></div>
            <div id="book-loading" class="hidden">Loading books...</div>
            <div id="pagination">
                <button id="prev-page" disabled>‚Üê Previous</button>
                <span id="page-info"></span>
                <button id="next-page" disabled>Next ‚Üí</button>
            </div>
        </div>
    </div>

    <!-- Image generation panel -->
    <div id="image-panel">
        <img id="generated-image" alt="Generated illustration">
    </div>

    <div id="loading-indicator"></div>

    <div id="api-key-prompt">
        <label for="api-key-input">Enter your OpenRouter API key:</label><br>
        <input type="password" id="api-key-input" placeholder="sk-or-...">
        <button id="save-api-key">Save</button>
        <p>
            Get one at <a href="https://openrouter.ai/settings/keys" target="_blank">openrouter.ai</a>
        </p>
    </div>

    <!-- Manual text input modal -->
    <div id="text-input-overlay" class="hidden">
        <div id="text-input-popup">
            <h2>Paste Book Text</h2>
            <p>The proxy server is unavailable. Please open the book in a new tab, copy the text, and paste it below.</p>
            <button id="open-book-tab">Open Book in New Tab</button>
            <textarea id="manual-text-input" placeholder="Paste the book text here..."></textarea>
            <div class="text-input-buttons">
                <button id="cancel-text-input">Cancel</button>
                <button id="submit-text-input">Load Book</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
